### 客戶檔案生成

每位客戶將由以下屬性定義：

- `CUSTOMER_ID`：客戶唯一識別碼
- (`x_customer_id`, `y_customer_id`)：在100 x 100網格中的一對實數座標，用於定義客戶的地理位置
- (`mean_amount`, `std_amount`)：客戶交易金額的平均值和標準差，假設交易金額遵循常態分配。`mean_amount`將從均勻分配(5,100)中抽取，而`std_amount`將設定為`mean_amount`的一半
- `mean_nb_tx_per_day`：客戶的每日平均交易次數，假設每日交易次數遵循卜瓦松分配。此數值將從均勻分配(0,4)中抽取

`generate_customer_profiles_table`函式提供了生成客戶檔案表格的實作。它接受要生成檔案的客戶數量作為輸入參數，以及用於確保可重現性的隨機狀態。該函式會回傳一個包含每位客戶屬性的DataFrame。

### 交易生成流程

模擬過程將包含五個主要步驟：

1. 客戶檔案生成：每位客戶都有不同的消費習慣。我們將透過為每位客戶定義特定屬性來進行模擬。主要屬性包括其地理位置、消費頻率和消費金額。這些客戶屬性將以表格形式呈現，稱為「客戶檔案表」。
2. 終端機檔案生成：終端機的屬性僅包含地理位置。終端機屬性將以表格形式呈現，稱為「終端機檔案表」。
3. 客戶檔案與終端機關聯：我們假設客戶只在其地理位置半徑r範圍內的終端機進行交易。這是一個簡單的假設，認為客戶只在地理位置相近的終端機進行交易。此步驟將在每個客戶檔案中新增一個「list_terminals」特徵，包含該客戶可使用的終端機集合。
4. 交易生成：模擬器將遍歷客戶檔案集合，根據其屬性（消費頻率、金額和可用終端機）生成交易。這將產生一個交易表格。
5. 詐欺情境生成：最後一步將對交易進行合法或詐欺的標記。這將依據三種不同的詐欺情境來執行。

交易生成流程如下圖所示。

<img src="https://github.com/Ming-Jer/fraud-detection-handbook/blob/main/Chapter_3_GettingStarted/images/FlowChart.png?raw=true">

圖2. 交易生成流程。客戶和終端機檔案被用來生成一組交易資料。最後一個步驟是生成詐欺情境，這將產生已標記的交易表格。

後續章節將詳細說明每個步驟的實作方式。

讓我們以生成五位客戶的檔案表為例：